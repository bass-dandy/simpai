import path from 'path';
import { serialize } from './objd.js';

describe('OBJD', () => {
  it('can serialize OBJD files', async () => {
    const serializedFile = serialize({
      filename: 'JobData - Adult - Science',
      type: 7,
      guid: 211690070,
      proxyGuid: 211729735,
      originalGuid: 1285469901,
      data: [
        140, 0, 0, 0, 4, 0, 128, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 129, 0,
        86, 34, 158, 12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0,
        0, 71, 189, 158, 12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 208, 7, 1,
        0, 0, 0, 0, 0, 100, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 205, 182, 158,
        76, 0, 0, 0, 0, 0, 0, 32, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 25, 0, 0, 0, 74, 111, 98, 68, 97, 116, 97, 32, 45, 32,
        65, 100, 117, 108, 116, 32, 45, 32, 83, 99, 105, 101, 110, 99, 101,
      ],
    });

    await expect(serializedFile).toMatchFile(path.join(__dirname, 'fixtures/valid.objd'));
  });
});
